<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Custom estimator constructor — estimator • tfestimators</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">tfestimators</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Using
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Getting Started</li>
    <li>
      <a href="../articles/estimator_basics.html">Estimator Basics</a>
    </li>
    <li>
      <a href="../articles/input_functions.html">Input Functions</a>
    </li>
    <li>
      <a href="../articles/feature_columns.html">Feature Columns</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Advanced</li>
    <li>
      <a href="../articles/run_hooks.html">Run Hooks</a>
    </li>
    <li>
      <a href="../articles/creating_estimators.html">Custom Estimators</a>
    </li>
    <li>
      <a href="../articles/layers.html">TensorFlow Layers</a>
    </li>
    <li>
      <a href="../articles/tensorboard.html">TensorBoard Visualization</a>
    </li>
    <li>
      <a href="../articles/parsing_spec.html">Parsing Utilities</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/examples/index.html">Examples</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/tfestimators">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Custom estimator constructor</h1>
    </div>

    
    <p>This is the core Estimator class to train and evaluate TensorFlow models.</p>
    

    <pre class="usage"><span class='fu'>estimator</span>(<span class='no'>model_fn</span>, <span class='kw'>model_dir</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>config</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>params</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model_fn</th>
      <td><p>Model function. Follows the signature:</p><ul>
<li><p><code>features</code>: single tensor or list of tensors (depending on data
passed to <code>train</code>),</p></li>
<li><p><code>labels</code>: single tensor or list of tensors (for multi-head models).
If <code>mode</code> is <code>mode_keys()$PREDICT</code>, <code>labels = NULL</code> will be passed.
If the <code>model_fn</code>'s signature does not accept <code>mode</code>, the <code>model_fn</code>
must still be able to handle <code>labels = NULL</code>.</p></li>
<li><p><code>mode</code>: Optional argument that specifies if this training, evaluation or prediction
created by <code><a href='mode_keys.html'>mode_keys()</a></code>.</p></li>
<li><p><code>params</code>: Optional list of hyperparameters. Will receive what is passed
to estimator in <code>params</code> parameter. This allows to configure estimators
from hyper parameter tuning.</p></li>
<li><p><code>config</code>: Optional configuration object created by <code><a href='run_config.html'>run_config()</a></code>.
Will receive what is passed to estimator in <code>config</code> parameter, or the default <code>config</code>.
Allows updating things in your <code>model_fn</code> based on configuration such as
<code>num_ps_replicas</code>, or <code>model_dir</code>.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>model_dir</th>
      <td><p>Directory to save model parameters, graph and etc. This can
also be used to load checkpoints from the directory into a estimator to
continue training a previously saved model. If <code>NULL</code>, the <code>model_dir</code> in
<code>config</code> will be used if set. If both are set, they must be same. If both
are <code>NULL</code>, a temporary directory will be used.</p></td>
    </tr>
    <tr>
      <th>config</th>
      <td><p>Configuration object.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>List of hyper parameters that will be passed into <code>model_fn</code>.
Keys are names of parameters, values are basic python types.</p></td>
    </tr>
    <tr>
      <th>class</th>
      <td><p>An optional set of <span style="R">R</span> classes to add to the generated object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>Estimator</code> object wraps a model which is specified by a <code>model_fn</code>,
which, given inputs and a number of other parameters, returns the ops
necessary to perform training, evaluation, or predictions.</p>
<p>All outputs (checkpoints, event files, etc.) are written to <code>model_dir</code>, or a
subdirectory thereof. If <code>model_dir</code> is not set, a temporary directory is
used.</p>
<p>The <code>config</code> argument can be used to passed run configuration object containing information
about the execution environment. It is passed on to the <code>model_fn</code>, if the
<code>model_fn</code> has a parameter named "config" (and input functions in the same
manner). If the <code>config</code> parameter is not passed, it is instantiated by
<code>estimator()</code>. Not passing config means that defaults useful for local
execution are used. <code>estimator()</code> makes config available to the model (for
instance, to allow specialization based on the number of workers available),
and also uses some of its fields to control internals, especially regarding
checkpointing.</p>
<p>The <code>params</code> argument contains hyperparameters. It is passed to the
<code>model_fn</code>, if the <code>model_fn</code> has a parameter named "params", and to the
input functions in the same manner. <code>estimator()</code> only passes <code>params</code> along, it
does not inspect it. The structure of <code>params</code> is therefore entirely up to
the developer.</p>
<p>None of estimator's methods can be overridden in subclasses (its
constructor enforces this). Subclasses should use <code>model_fn</code> to configure the
base class, and may add methods implementing specialized functionality.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other custom estimator methods: <code><a href='coef.tf_estimator.html'>coef.tf_estimator</a></code>,
  <code><a href='estimator_spec.html'>estimator_spec</a></code>,
  <code><a href='evaluate.tf_estimator.html'>evaluate.tf_estimator</a></code>,
  <code><a href='export_savedmodel.tf_estimator.html'>export_savedmodel.tf_estimator</a></code>,
  <code><a href='predict.tf_estimator.html'>predict.tf_estimator</a></code>,
  <code><a href='train.tf_estimator.html'>train.tf_estimator</a></code></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Yuan Tang, JJ Allaire, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' height='24' /></a>, Kevin Ushey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
