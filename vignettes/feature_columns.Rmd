---
title: "Feature Columns"
output: 
  rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Feature Columns}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


Feature columns are used to specify the feature transformations and combinations for a model, e.g. `column_embedding()` that converts a categorical variable into embedding and `column_crossed()` that combines two variables in a specified way. 

Users can use the default `feature_columns()` function to convert columns in an automatic fashion without any fancy feature engineering, e.g. numeric variables are converted using `column_numeric()`, factor variables are converted using `column_categorical_with_identity()`, and character variables are converted using `column_with_hash_bucket()`. 

``` r
fc <- feature_columns(mtcars, c(drat, cyl))
```

You can of course also specify custom feature transformations by creating an empty `feature_columns` specification and then piping column definitions into it. For example:

``` r
fc <- feature_columns(subsidiaries) %>% 
  column_numeric(profit) %>% 
  column_categorical_with_identity(profession, num_buckets = 5)
```

You can also use pattern matching to handle multiple columns at once, for example:

```r
fc <- feature_columns(subsidiaries) %>% 
  column_numeric(profit) %>% 
  column_categorical_with_identity(profession) %>% 
  column_numeric(ends_with("_pct"))
```

Note that when creating `feature_columns()` the data that you pass as the first argument (`mtcars`) need not contain all of your data, but rather should be an exemplar of the data (i.e. column names, data types, and factor levels).


